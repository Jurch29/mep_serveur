(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{48:function(e,t,a){e.exports=a(91)},54:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},89:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),n=a(32),l=a.n(n),s=(a(54),a(17)),i=a(18),c=a(21),u=a(19),d=a(20),m=a(24),h=a.n(m),p=(a(74),a(98)),g=a(99),b=a(100),f=a(30),v=Object(f.a)(),E=(a(75),a(97)),S=a(96),y=a(95),L=a(94),w=a(93),M=a(42),C=a.n(M),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showModal:!1,loggedIn:null,loading:!1,error:null,initialTab:null,recoverPasswordSuccess:null,lblerror_login:"Fatal error",lblerror_register:"Fatal error"},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onLogin",value:function(){var e=this,t=this;this.startLoading();var a=document.querySelector("#email").value,r=document.querySelector("#password").value;a&&r?h()({method:"post",url:"http://localhost:8080/mep_serveur/ServletAuth",headers:{crossDomain:!0,"Content-Type":"text/plain"},data:{login:a,mdp:r}}).then(function(t){"failed"===t.data?e.setState({error:!0,lblerror_login:"Identifiant ou mot de passe incorrecte."}):(console.log(t.data),e.onLoginSuccess(t.data.username),e.props.updateuser(t.data.id))}).catch(function(e){t.setState({error:!0,lblerror_login:"Erreur r\xe9seau("+e+")"})}):this.setState({error:!0,lblerror_login:"Veuillez renseigner Email et mot de passe."}),this.finishLoading()}},{key:"onRegister",value:function(){var e=this,t=this,a=document.querySelector("#login").value,r=document.querySelector("#email").value,o=document.querySelector("#password").value;a&&r&&o?h()({method:"post",url:"http://localhost:4000/register",headers:{crossDomain:!0,"Content-Type":"application/json"},data:{login:r,mdp:o,prenom:a}}).then(function(t){"failed"===t.data?e.setState({error:!0}):e.closeModal()}).catch(function(e){t.setState({error:!0,lblerror_register:"Erreur r\xe9seau("+e+")"})}):this.setState({error:!0,lblerror_register:"Veuillez remplir tout les champs."})}},{key:"onRecoverPassword",value:function(){document.querySelector("#email").value?this.setState({error:null,recoverPasswordSuccess:!0}):this.setState({error:!0,recoverPasswordSuccess:!1})}},{key:"openModal",value:function(e){var t=this;this.setState({initialTab:e},function(){t.setState({showModal:!0})})}},{key:"onLoginSuccess",value:function(e,t){this.closeModal(),this.setState({loggedIn:e,loading:!1})}},{key:"onLoginFail",value:function(e,t){this.setState({loading:!1,error:t})}},{key:"startLoading",value:function(){this.setState({loading:!0})}},{key:"finishLoading",value:function(){this.setState({loading:!1})}},{key:"afterTabsChange",value:function(){this.setState({error:null,recoverPasswordSuccess:!1})}},{key:"closeModal",value:function(){this.setState({showModal:!1,error:null})}},{key:"render",value:function(){var e=this,t=this.state.loggedIn,a=this.state.loading;return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{bg:"dark",variant:"dark"},o.a.createElement(E.a.Brand,{href:"#home"},"DB.JAAP"),o.a.createElement(S.a,{className:"mr-auto"},o.a.createElement("li",{className:"acceuil"},o.a.createElement(w.a,{to:"/accueil"},"Acceuil")),o.a.createElement("li",null,o.a.createElement(w.a,{to:"/apropos"},"A propos"))),t?o.a.createElement("div",{className:"login"},t):o.a.createElement(y.a,{inline:!0},o.a.createElement(L.a,{onClick:function(){return e.openModal()},variant:"outline-info"},"Connexion"))),o.a.createElement("br",null),o.a.createElement(C.a,{visible:this.state.showModal,onCloseModal:this.closeModal.bind(this),loading:a,initialTab:this.state.initialTab,error:this.state.error,tabs:{afterChange:this.afterTabsChange.bind(this),loginLabel:"Connection",registerLabel:"Inscription"},loginError:{label:this.state.lblerror_login},registerError:{label:this.state.lblerror_register},startLoading:this.startLoading.bind(this),finishLoading:this.finishLoading.bind(this),form:{onLogin:this.onLogin.bind(this),onRegister:this.onRegister.bind(this),onRecoverPassword:this.onRecoverPassword.bind(this),recoverPasswordSuccessLabel:this.state.recoverPasswordSuccess?{label:"Un message a \xe9t\xe9 envoy\xe9 sur votre bo\xeete mail."}:null,recoverPasswordAnchor:{label:"Mot de passe oubli\xe9 ?"},loginBtn:{label:"Se connecter"},registerBtn:{label:"S'inscrire"},recoverPasswordBtn:{label:"Envoyer"},loginInputs:[{containerClass:"RML-form-group",label:"Email",type:"email",inputClass:"RML-form-control",id:"email",name:"email",placeholder:"Email"},{containerClass:"RML-form-group",label:"Mot de passe",type:"password",inputClass:"RML-form-control",id:"password",name:"password",placeholder:"Mot de passe"}],registerInputs:[{containerClass:"RML-form-group",label:"Login",type:"text",inputClass:"RML-form-control",id:"login",name:"login",placeholder:"Login"},{containerClass:"RML-form-group",label:"Email",type:"email",inputClass:"RML-form-control",id:"email",name:"email",placeholder:"Email"},{containerClass:"RML-form-group",label:"Mot de passe",type:"password",inputClass:"RML-form-control",id:"password",name:"password",placeholder:"Mot de passe"}],recoverPasswordInputs:[{containerClass:"RML-form-group",label:"Email",type:"email",inputClass:"RML-form-control",id:"email",name:"email",placeholder:"Email"}]}}))}}]),t}(r.Component),R=(a(89),function(e){function t(e,a){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e,a))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("p",null,"Accueil")}}]),t}(r.Component)),j=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(p.a,{history:v},o.a.createElement("div",null,o.a.createElement(k,null),o.a.createElement(g.a,null,o.a.createElement(b.a,{exact:!0,path:"/",component:R}),o.a.createElement(b.a,{path:"/accueil",component:R}))))}}]),t}(r.Component);l.a.render(o.a.createElement(j,null),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.6c099049.chunk.js.map